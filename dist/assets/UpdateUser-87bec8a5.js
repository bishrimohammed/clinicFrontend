import{m as v,l as q,Q as j,r as y,f as S,u as C,d as U,j as e}from"./index-adc5c439.js";import{u as E}from"./index.esm-28bdf91a.js";import{c as A,a as t,f as R,o as F}from"./yup-e734d6e3.js";import{T as c}from"./TextInput-568ed4bc.js";import{N as I}from"./NumberInput-c7627adf.js";import{A as L}from"./axiosInstance-8e812653.js";import{A as G}from"./useAxiosHeaders-0302b736.js";import{u as $}from"./useMutation-46d3959e.js";import{C as Q,b as f}from"./InputGroupContext-86e132d6.js";import{F as r}from"./Form-fd32e757.js";import{R as u}from"./Row-191556ab.js";import{C as i}from"./Col-cdbc53ce.js";import{S as k}from"./index.esm-650f3687.js";import"./ElementChildren-abb33785.js";const B=()=>{const a=G(),{userId:n}=v(),m=q();return $({mutationFn:async s=>L.put(`/user/${n}`,s,{...a}),onSuccess:async(s,o)=>{j.success("user Updated"),m.invalidateQueries({queryKey:["users"],exact:!0})},onError:async s=>{const{data:o}=s.response;j.error(o.message),console.log(o.message)}})},D=A().shape({firstName:t().required("firstName is required"),middleName:t().required("middleName is required"),lastName:t(),email:t().email("invalid email").required("Email is required"),gender:t().required("gender is required"),phone:t().required("phone is required"),role:t().required("role is required"),age:R().transform(a=>isNaN(a)?void 0:a).positive().integer().min(18,"age must be grater that 18").required("age is required")}),_=()=>{var x;y.useRef();const{state:a}=S();C(d=>d.auth.user);let n=a.username.split(" ");const m=U(),{register:s,reset:o,formState:{errors:l},handleSubmit:b}=E({defaultValues:{phone:a.phone,role:a.role,email:a.email,age:a.age,gender:a.gender,lastName:n[2],middleName:n[1],firstName:n[0]},resolver:F(D)}),{mutateAsync:N,isPending:p}=B(),g=d=>{N(d).then(h=>{console.log(h),h.status===200&&(o({age:"",firstName:"",lastName:"",gender:"",role:"",email:"",middleName:"",phone:""}),m(-1))})};return e.jsxs(Q,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{children:"Update User"})}),e.jsx("hr",{}),e.jsxs(r,{onSubmit:b(g),children:[e.jsxs(u,{children:[e.jsx(i,{children:e.jsx(c,{errors:l.firstName,name:"firstName",register:s,label:"first name"})}),e.jsx(i,{children:e.jsx(c,{errors:l.middleName,name:"middleName",register:s,label:"middle name"})}),e.jsx(i,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"last name"}),e.jsx(r.Control,{...s("lastName"),name:"lastName",id:"lastName",type:"text",placeholder:"Enter..."})]})})]}),e.jsxs(u,{children:[e.jsx(i,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"sex"}),e.jsxs(r.Select,{...s("gender"),disabled:!0,name:"gender","aria-label":"Default select example",children:[e.jsx("option",{value:"",children:"Select Sex"}),e.jsx("option",{value:"male",children:"male"}),e.jsx("option",{value:"female",children:"female"})]})]})}),e.jsx(i,{children:e.jsx(I,{errors:l.age,name:"age",register:s,label:"Age"})}),e.jsx(i,{children:e.jsx(c,{errors:l.phone,name:"phone",register:s,label:"phone"})})]}),e.jsxs(u,{children:[e.jsxs(i,{children:[e.jsxs(r.Group,{className:"mb-3",controlId:"formBasicEmail",children:[e.jsx(r.Label,{children:"Email"}),e.jsx(r.Control,{errors:l.email,name:"email",...s("email"),disabled:!0,type:"email",placeholder:"example@gmail.com",isInvalid:l.email})]}),e.jsx(r.Control.Feedback,{type:"invalid",children:(x=l.email)==null?void 0:x.message})]}),e.jsx(i,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Role"}),e.jsxs(r.Select,{...s("role"),name:"role",disabled:!0,"aria-label":"Default select example",children:[e.jsx("option",{children:"Select role"}),e.jsx("option",{value:"doctor",children:"doctor"}),e.jsx("option",{value:"cashier",children:"cashier"}),e.jsx("option",{value:"laboratorian",children:"laboratorian"})]})]})}),e.jsx(i,{})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justifyContentEnd",children:[e.jsx(f,{variant:"danger",type:"button",className:"me-3",onClick:()=>m(-1),children:"Return"}),e.jsxs(f,{variant:"primary",disabled:p,type:"submit",children:[p&&e.jsx(k,{animation:"border",size:"sm"}),"Update"]})]})]})]})};export{_ as default};
