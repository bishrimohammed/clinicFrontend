import{l as A,Q as S,j as e,r as a,m as C}from"./index-adc5c439.js";import{u as D}from"./index.esm-28bdf91a.js";import{c as M,f as o,o as T}from"./yup-e734d6e3.js";import{u as V}from"./useMutation-46d3959e.js";import{A as g}from"./axiosInstance-8e812653.js";import{A as k}from"./useAxiosHeaders-0302b736.js";import{M as x}from"./Modal-07b4d2ea.js";import{F as r}from"./Form-fd32e757.js";import{R as u}from"./Row-191556ab.js";import{C as n}from"./Col-cdbc53ce.js";import{b as y,C as Q}from"./InputGroupContext-86e132d6.js";import{S as B}from"./index.esm-650f3687.js";import{u as E}from"./useMedicalhistory-d492c1f3.js";import{f as $}from"./formatDate-f5528b17.js";import{u as z}from"./useQuery-0c7d53ac.js";import{T as K}from"./Table-892073ec.js";import"./DefaultLayout-65fbaa93.js";import"./index.es-ffb0b0ea.js";import"./NoopTransition-52f737ac.js";import"./divWithClassName-747f8fd3.js";import"./ElementChildren-abb33785.js";import"./moment-fbc5633a.js";const W=M().shape({temperature:o().positive().required("temperature is required"),respiratoryRate:o().transform(s=>isNaN(s)?void 0:s).positive().required("respiratoryRate is required"),SystolicBloodPressure:o().transform(s=>isNaN(s)?void 0:s).positive().required("SystolicBloodPressure is required"),DiastolicBloodPressure:o().transform(s=>isNaN(s)?void 0:s).positive().required("DiastolicBloodPressure is required"),heartRate:o().transform(s=>isNaN(s)?void 0:s).positive().required("heartRate is required"),SaO2:o().transform(s=>isNaN(s)?void 0:s).positive(),SPO2:o().transform(s=>isNaN(s)?void 0:s).positive().required("SPO2 is required"),FBS:o().transform(s=>isNaN(s)?void 0:s).positive().required("FBS is required"),RBS:o().transform(s=>isNaN(s)?void 0:s).positive().required("RBS is required"),height:o().transform(s=>isNaN(s)?void 0:s).positive().required("height is required"),weight:o().transform(s=>isNaN(s)?void 0:s).positive().required("temperature is required"),waistCircumference:o().transform(s=>isNaN(s)?void 0:s).positive(),headCircumference:o().transform(s=>isNaN(s)?void 0:s).positive(),pulseRate:o().transform(s=>isNaN(s)?void 0:s).positive().required("pulseRate is required")}),X=()=>{const s=A(),l=k();return V({mutationFn:async c=>g.post("patienthistory/vitals",c,{...l}),onSuccess:async c=>{S.success("submitted successfully");const{data:m}=c;console.log(m),s.invalidateQueries({queryKey:["MedicalHistory",m._id,"vitals"],exact:!0})},onError:async c=>{S.err(c.response.data.message)}})},_=s=>{const l=a.useRef(),c=a.useRef(),m=a.useRef(),p=a.useRef(),j=a.useRef(),R=a.useRef(),h=a.useRef(),f=a.useRef(),i=a.useRef(),b=a.useRef(),P=a.useRef(),q=a.useRef(),v=a.useRef(),w=a.useRef(),{mutateAsync:O,isPending:N}=X(),{register:d,formState:{errors:t},handleSubmit:F}=D({resolver:T(W)}),{historyId:G}=C(),I=L=>{O({vitals:L,historyId:G}).then(H=>{H.status===201&&s.handleClose()})};return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsxs(r,{onSubmit:F(I),children:[e.jsxs(u,{className:"pb-1",children:[e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Temperature (Â°C)"})," ",e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:q,type:"number",...d("temperature"),isInvalid:t.temperature,name:"temperature"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Weight"}),e.jsx(r.Control,{ref:p,type:"number",...d("weight"),isInvalid:t.weight,name:"weight"})]})})," ",e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Height"}),e.jsx(r.Control,{ref:j,type:"number",...d("height"),isInvalid:t.height,name:"height"})]})})]}),e.jsxs(u,{style:{backgroundColor:"#f2f2f2"},className:"pb-1",children:[e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"SBP"})," ",e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:v,type:"number",...d("SystolicBloodPressure"),isInvalid:t.SystolicBloodPressure,name:"SystolicBloodPressure"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"DBP"}),e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:w,type:"number",...d("DiastolicBloodPressure"),isInvalid:t.DiastolicBloodPressure,name:"DiastolicBloodPressure"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Heart Rate"})," ",e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:b,type:"number",...d("heartRate"),isInvalid:t.heartRate,name:"heartRate"})]})})]}),e.jsxs(u,{className:"pb-1",children:[e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Respiratory Rate"}),e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:P,type:"number",...d("respiratoryRate"),isInvalid:t.respiratoryRate,name:"respiratoryRate"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"pulseRate"}),e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:l,type:"number",...d("pulseRate"),isInvalid:t.pulseRate,name:"pulseRate"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"RBS"}),e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:R,type:"number",...d("RBS"),isInvalid:t.RBS,name:"RBS"})]})})]}),e.jsxs(u,{style:{backgroundColor:"#f2f2f2"},className:"pb-1",children:[e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"FBS"}),e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:h,...d("FBS"),isInvalid:t.FBS,name:"FBS",type:"number"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"headCircumference"}),e.jsx(r.Control,{ref:c,type:"number",...d("headCircumference"),isInvalid:t==null?void 0:t.headCircumference,name:"headCircumference"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"waistCircumference"}),e.jsx(r.Control,{ref:m,type:"number",...d("waistCircumference"),isInvalid:t.waistCircumference,name:"waistCircumference"})]})})]}),e.jsxs(u,{children:[e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"SPO2"}),e.jsx("span",{className:" ms-1 text-danger text-center",children:"* "}),e.jsx(r.Control,{ref:f,type:"number",...d("SPO2"),isInvalid:t.SPO2,name:"SPO2"})]})}),e.jsx(n,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"SaO2"}),e.jsx(r.Control,{ref:i,type:"number",...d("SaO2"),isInvalid:t==null?void 0:t.SaO2,name:"SaO2"})]})}),e.jsx(n,{})]}),e.jsxs(x.Footer,{className:"pb-0",children:[e.jsx(y,{variant:"secondary",onClick:s.handleClose,children:"Cancel"}),e.jsxs(y,{variant:"primary",type:"submit",disabled:N,children:[N&&e.jsx(B,{animation:"border",size:"sm"}),"+ Add"]})]})]})})})},J=s=>{const l=()=>{s.handleClose()};return e.jsxs(x,{size:"lg",show:s.show,onHide:s.handleClose,children:[e.jsx(x.Header,{closeButton:!0,children:e.jsx(x.Title,{children:"Add Vital Signs"})}),e.jsx(x.Body,{children:e.jsx(_,{handleClose:l})})]})},U=s=>z({queryKey:["MedicalHistory",s,"vitals"],queryFn:async()=>g.get(`patienthistory/${s}/getvitals`).then(l=>l.data),staleTime:5*60*1e3}),ye=()=>{const[s,l]=a.useState(!1),c=()=>l(!1),{historyId:m}=C(),{data:p,error:j,isPending:R}=U(m),{data:h}=E(m),f=()=>{l(!0)};return R?e.jsx(B,{animation:"grow"}):j?"An error has occurred: "+j.message:e.jsxs(Q,{className:"px-0",style:{overflowX:"hidden"},children:[e.jsx(J,{show:s,handleClose:c,handleShow:f}),e.jsx("div",{className:"mb-2 mt-0",children:e.jsx("h4",{children:"Vital Signs"})}),e.jsx("hr",{}),e.jsx("div",{style:{position:"relative"},className:"w-100",children:e.jsxs(K,{striped:!0,bordered:!0,responsive:!0,style:{position:"relative"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Taken By"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Temp"}),e.jsx("th",{children:"Weight"}),e.jsx("th",{children:"Height"}),e.jsx("th",{children:"SBP"}),e.jsx("th",{children:"DBP"}),e.jsx("th",{children:"HRate"}),e.jsx("th",{children:"RRate"}),e.jsx("th",{children:"SaO2"}),e.jsx("th",{children:"SPO2"}),e.jsx("th",{children:"RBS"}),e.jsx("th",{children:"FBS"})]})}),e.jsx("tbody",{children:p.vitals.map((i,b)=>e.jsxs("tr",{children:[e.jsx("td",{children:i.takenBy.username}),e.jsx("td",{children:$(i.takenTime)}),e.jsx("td",{children:i.temperature}),e.jsx("td",{children:i.weight}),e.jsx("td",{children:i.height}),e.jsx("td",{children:i.SystolicBloodPressure}),e.jsx("td",{children:i.DiastolicBloodPressure}),e.jsx("td",{children:i.heartRate}),e.jsx("td",{children:i.respiratoryRate}),e.jsx("td",{children:i.SaO2}),e.jsx("td",{children:i.SPO2}),e.jsx("td",{children:i.RBS}),e.jsx("td",{children:i.FBS})]},b))})]})}),e.jsx("div",{className:"d-flex mt-4 w-100  justify-content-end",children:e.jsx("div",{children:e.jsx(y,{onClick:f,className:"ms-3",variant:"success",type:"button",disabled:!(h!=null&&h.status),children:"+ New Vitals"})})})]})};export{ye as default};
