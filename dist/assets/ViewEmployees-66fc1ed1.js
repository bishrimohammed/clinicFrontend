import{j as e,r as oe,d as he}from"./index-adc5c439.js";import{o as xe}from"./yup-e734d6e3.js";import{u as pe}from"./index.esm-28bdf91a.js";import{T as $}from"./TextInput-568ed4bc.js";import{u as je}from"./useGetWoredas-79e3b962.js";import{u as ue,a as be,b as ye,c as Ne,E as _e}from"./useAddEmployee-96111c9e.js";import{C as r}from"./Col-cdbc53ce.js";import{F as s}from"./Form-fd32e757.js";import{M as p}from"./Modal-07b4d2ea.js";import{R as j}from"./Row-191556ab.js";import{b as N,C as ge}from"./InputGroupContext-86e132d6.js";import{T as fe}from"./Table-892073ec.js";import"./useQuery-0c7d53ac.js";import"./axiosInstance-8e812653.js";import"./useMutation-46d3959e.js";import"./ElementChildren-abb33785.js";import"./DefaultLayout-65fbaa93.js";import"./index.esm-650f3687.js";import"./index.es-ffb0b0ea.js";import"./NoopTransition-52f737ac.js";import"./divWithClassName-747f8fd3.js";const ve=({show:u,handleClose:x})=>{var f,v,E,S,C,G,L,I,D,F,A,w,W,k,O,R,H,M,P,T,V,B,Y,z,J,q,K,Q,U,X,Z;const{data:t}=je(),{data:m}=ue(),{data:o}=be(),{data:h}=ye(),{mutateAsync:ee,isPending:_}=Ne(),{register:i,formState:{errors:a},handleSubmit:se,watch:c}=pe({resolver:xe(_e)}),le=l=>{console.log(l.Emergency);const d=new FormData;d.append("firstName",l.firstName),d.append("middleName",l.middleName),d.append("lastName",l.lastName),d.append("gender",l.gender),d.append("date_of_birth",l.date_of_birth),d.append("date_of_hire",l.date_of_hire),d.append("position",l.position),d.append("photo",l.photo[0]),d.append("address",JSON.stringify(l.address)),d.append("Emergency",JSON.stringify(l.Emergency)),ee(d).then(n=>{n.status===201&&x()})},ae=l=>{const d=new Date().toISOString().substring(0,10),n=new Date(d);return n.setFullYear(n.getFullYear()-l),n.toISOString().substring(0,10)},re=c("Emergency.the_same_address_as_employee"),ie=c("Emergency.relation"),de=c("address.region_id"),b=c("address.city_id"),g=c("address.subcity_id"),ne=c("address.woreda_id"),te=c("Emergency.region_id"),me=c("Emergency.city_id"),ce=c("Emergency.subcity_id");let y;return re?y=e.jsxs(e.Fragment,{children:[e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Phone"}),e.jsx(s.Control,{type:"number",disabled:!0,placeholder:"09/07********",...i("address.phone_1")})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Email"}),e.jsx(s.Control,{type:"email",disabled:!0,...i("address.email",{})}),e.jsx(s.Control.Feedback,{type:"inValid",className:"small text-danger",children:(v=(f=a==null?void 0:a.address)==null?void 0:f.email)==null?void 0:v.message})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Region"}),e.jsxs(s.Select,{disabled:!0,...i("address.region_id"),"aria-label":"Default select example",children:[e.jsx("option",{value:"",children:"please select"}),m==null?void 0:m.map((l,d)=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"City"}),e.jsx(s.Control,{disabled:!0,"aria-label":"Default select example",value:(E=o.filter(l=>l.id==b)[0])==null?void 0:E.name})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"SubCity"}),e.jsx(s.Control,{disabled:!0,name:"role","aria-label":"Default select example",value:(S=h.filter(l=>l.id==g)[0])==null?void 0:S.Subcity_name})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Woreda"}),e.jsx(s.Control,{disabled:!0,...i("address.woreda_id"),value:(C=t.filter(l=>l.id==ne)[0])==null?void 0:C.Subcity_name})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"House Number"}),e.jsx(s.Control,{type:"number",disabled:!0,...i("address.house_number"),isInvalid:(G=a.address)==null?void 0:G.house_number})]})})]}):y=e.jsxs(e.Fragment,{children:[e.jsxs(r,{md:4,sm:12,className:"mb-2",children:[e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Phone"}),e.jsx(s.Control,{type:"number",placeholder:"09/07********",...i("Emergency.phone_1"),isInvalid:(L=a.Emergency)==null?void 0:L.phone_1})]}),e.jsx(s.Control.Feedback,{type:"inValid",className:"small text-danger",children:(D=(I=a==null?void 0:a.Emergency)==null?void 0:I.phone_1)==null?void 0:D.message})]}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Region"}),e.jsxs(s.Select,{...i("Emergency.region_id"),isInvalid:(F=a.Emergency)==null?void 0:F.region_id,"aria-label":"Default select example",children:[e.jsx("option",{value:"",children:"please select"}),m==null?void 0:m.map((l,d)=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"City"}),e.jsxs(s.Select,{...i("Emergency.city_id"),"aria-label":"Default select example",isInvalid:(A=a.Emergency)==null?void 0:A.city_id,children:[e.jsx("option",{value:"",children:"please select"}),o==null?void 0:o.filter(l=>l.region_id==te).map((l,d)=>e.jsx("option",{value:l.id,children:l.name},l.name))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"SubCity"}),e.jsxs(s.Select,{...i("Emergency.subcity_id"),"aria-label":"Default select example",isInvalid:(w=a.Emergency)==null?void 0:w.subcity_id,children:[e.jsx("option",{value:"",children:"please select"}),h==null?void 0:h.filter(l=>b?l.city_id==me:l).map((l,d)=>e.jsx("option",{value:l.id,children:l.Subcity_name},l.Subcity_name+l.id))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Woreda"}),e.jsxs(s.Select,{...i("Emergency.woreda_id"),isInvalid:(W=a.Emergency)==null?void 0:W.woreda_id,children:[e.jsx("option",{value:"",children:"please select"}),(k=t==null?void 0:t.filter(l=>l.subCity_id==ce))==null?void 0:k.map((l,d)=>{var n;return e.jsxs("option",{value:l.id,children:[l.name," ",(n=l.SubCity)==null?void 0:n.Subcity_name]},d)})]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"House Number"}),e.jsx(s.Control,{type:"number",...i("Emergency.house_number"),isInvalid:(O=a.Emergency)==null?void 0:O.house_number})]})})]}),e.jsxs(p,{size:"lg",show:u,onHide:x,children:[e.jsx(p.Header,{closeButton:!0,children:e.jsx(p.Title,{children:"Add Employee"})}),e.jsx(p.Body,{children:e.jsx(e.Fragment,{children:e.jsxs(s,{onSubmit:se(le),encType:"multipart/form-data",children:[e.jsxs(j,{children:[e.jsx(r,{md:4,sm:12,children:e.jsx($,{errors:a.firstName,name:"firstName",register:i,label:"first name"})}),e.jsx(r,{md:4,sm:12,children:e.jsx($,{errors:a.middleName,name:"middleName",register:i,label:"middle name"})}),e.jsx(r,{md:4,sm:12,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"last name"}),e.jsx(s.Control,{...i("lastName"),name:"lastName",id:"lastName",type:"text",placeholder:"Enter..."})]})})]}),e.jsxs(j,{children:[e.jsx(r,{md:4,sm:12,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Gender"}),e.jsxs(s.Select,{...i("gender"),name:"gender","aria-label":"Default select example",isInvalid:a.gender,children:[e.jsx("option",{value:"",children:"please select"}),e.jsx("option",{value:"male",children:"male"}),e.jsx("option",{value:"female",children:"female"})]})]})}),e.jsx(r,{md:4,sm:12,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"photo"}),e.jsx(s.Control,{...i("photo"),type:"file",name:"photo",placeholder:"Enter..."})]})}),e.jsx(r,{md:4,sm:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Birth Date"}),e.jsx(s.Control,{type:"date",...i("date_of_birth"),max:ae(18),isInvalid:a.date_of_birth})]})}),e.jsx(r,{md:4,sm:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Date of Hire"}),e.jsx(s.Control,{type:"date",...i("date_of_hire"),max:new Date().toISOString().substring(0,10),isInvalid:a.date_of_hire})]})}),e.jsx(r,{md:4,sm:12,children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Position"}),e.jsxs(s.Select,{...i("position"),name:"position","aria-label":"Default select example",isInvalid:a.position,children:[e.jsx("option",{value:"",children:"please select"}),e.jsx("option",{value:"Doctor",children:"Doctor"}),e.jsx("option",{value:"Cashier",children:"Cashier"}),e.jsx("option",{value:"Nurse",children:"Nurse"}),e.jsx("option",{value:"Other",children:"Other"})]})]})}),e.jsx(r,{})]}),e.jsx("h6",{className:"border-bottom border-1 border-black py-2 mb-3 fw-bold",children:"Home Address Information"}),e.jsxs(j,{children:[e.jsxs(r,{md:4,sm:12,className:"mb-2",children:[e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Phone"}),e.jsx(s.Control,{type:"number",placeholder:"09/07********",...i("address.phone_1"),isInvalid:(R=a.address)==null?void 0:R.phone_1})]}),e.jsx(s.Control.Feedback,{type:"inValid",className:"small text-danger",children:(M=(H=a==null?void 0:a.address)==null?void 0:H.phone_1)==null?void 0:M.message})]}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Email"}),e.jsx(s.Control,{type:"email",...i("address.email"),placeholder:"example@example.com",isInvalid:(P=a.address)==null?void 0:P.email}),e.jsx(s.Control.Feedback,{type:"inValid",className:"small text-danger",children:(V=(T=a==null?void 0:a.address)==null?void 0:T.email)==null?void 0:V.message})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Region"}),e.jsxs(s.Select,{...i("address.region_id"),"aria-label":"Default select example",isInvalid:(B=a.address)==null?void 0:B.region_id,children:[e.jsx("option",{value:"",children:"please select"}),m==null?void 0:m.map((l,d)=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"City"}),e.jsxs(s.Select,{...i("address.city_id"),"aria-label":"Default select example",isInvalid:(Y=a.address)==null?void 0:Y.city_id,children:[e.jsx("option",{value:"",children:"please select"}),o==null?void 0:o.filter(l=>l.region_id==de).map((l,d)=>e.jsx("option",{value:l.id,children:l.name},l.name))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"SubCity"}),e.jsxs(s.Select,{...i("address.subcity_id"),"aria-label":"Default select example",isInvalid:(z=a.address)==null?void 0:z.subcity_id,children:[e.jsx("option",{value:"",children:"please select"}),h==null?void 0:h.filter(l=>l.city_id==b).map((l,d)=>e.jsx("option",{value:l.id,children:l.Subcity_name},l.Subcity_name+l.id))]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Woreda"}),e.jsxs(s.Select,{...i("address.woreda_id"),isInvalid:(J=a.address)==null?void 0:J.woreda_id,children:[e.jsx("option",{value:"",children:"Select Woreda"}),(q=t==null?void 0:t.filter(l=>l.subCity_id==g))==null?void 0:q.map((l,d)=>{var n;return e.jsxs("option",{value:l.id,children:[l.name," ",(n=l.SubCity)==null?void 0:n.Subcity_name]},d)})]})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"House Number"}),e.jsx(s.Control,{type:"number",...i("address.house_number"),isInvalid:(K=a.address)==null?void 0:K.house_number})]})})]}),e.jsx("h6",{className:"border-bottom border-1 border-black py-2 mb-3 fw-bold",children:"Emergency Contact Information"}),e.jsxs(j,{children:[e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"First Name"}),e.jsx(s.Control,{type:"text",...i("Emergency.firstName"),isInvalid:(Q=a.Emergency)==null?void 0:Q.firstName})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Middle Name"}),e.jsx(s.Control,{type:"text",...i("Emergency.middleName"),isInvalid:(U=a.Emergency)==null?void 0:U.middleName})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Last Name"}),e.jsx(s.Control,{type:"text",...i("Emergency.lastName"),isInvalid:(X=a.Emergency)==null?void 0:X.lastName})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Relation Ship"}),e.jsxs(s.Select,{...i("Emergency.relation"),"aria-label":"Default select example",children:[e.jsx("option",{value:"Father",children:"Father"}),e.jsx("option",{value:"Mother",children:"Mother"}),e.jsx("option",{value:"Spouse",children:"Spouse"}),e.jsx("option",{value:"Other",children:"Other"})]})]})}),ie==="Other"&&e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Relation Ship Type"}),e.jsx(s.Control,{...i("Emergency.other_relation"),"aria-label":"Default select example",isInvalid:(Z=a.Emergency)==null?void 0:Z.other_relation})]})}),e.jsx(r,{md:4,sm:12,className:"mb-2",children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{children:"Same Address as Employee"}),e.jsx(s.Check,{type:"checkbox",...i("Emergency.the_same_address_as_employee")})]})}),y]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-end gap-3",children:[e.jsx(N,{variant:"secondary",onClick:x,children:"Close"}),e.jsxs(N,{variant:"primary",disabled:_,type:"submit",children:[_&&e.jsx(Spinner,{animation:"border",size:"sm"}),e.jsx("span",{className:"fw-bold",children:"+"})," Add Employee"]})]})]})})})]})},ze=()=>{const[u,x]=oe.useState(!1),t=()=>x(!1);return he(),e.jsxs(e.Fragment,{children:[e.jsxs(ge,{className:"p-3",children:[e.jsxs(N,{className:"mb-2 ms-auto",onClick:()=>x(!0),children:[" ","New Employee"]}),e.jsxs(fe,{striped:!0,bordered:!0,hover:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee Number"}),e.jsx("th",{children:"Photo"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Age"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Position"}),e.jsx("th",{children:"Start Date"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:e.jsx("tr",{})})]})]}),e.jsx(ve,{show:u,handleClose:t})]})};export{ze as default};
