import{l as p,u as g,j as t,L as b,N as v}from"./index-adc5c439.js";import{u as N}from"./useQuery-0c7d53ac.js";import{u as y}from"./useMutation-46d3959e.js";import{A as a}from"./axiosInstance-8e812653.js";import{A as c}from"./useAxiosHeaders-0302b736.js";import{S as L}from"./index.esm-650f3687.js";import{C as P,b as A}from"./InputGroupContext-86e132d6.js";import{T as C}from"./Table-892073ec.js";import{f as k}from"./format-b217b67f.js";import"./constants-0a94a958.js";const S=()=>{const n=c();return N({queryKey:["PatientWaitingList"],queryFn:async()=>a.get("/assignpatient",{...n}).then(e=>e.data),staleTime:60*60*1e3})},F=()=>{const n=p(),e=c();return y({mutationFn:async r=>a.patch(`/doctorque/${r}/checkin`,{},{...e}).then(i=>i.data),onSuccess:async()=>{n.invalidateQueries(["PatientWaitingList"])}})},Q=()=>{const n=p(),e=c();return y({mutationFn:async r=>a.patch(`/doctorque/${r}/checkout`,{},{...e}).then(i=>i.data),onSuccess:async()=>{n.invalidateQueries(["PatientWaitingList"])}})},G=()=>{const n=g(s=>s.auth.user),{data:e,isLoading:r,isError:i,error:f}=S();return F(),Q(),r?t.jsx(L,{animation:"grow"}):i?t.jsxs("div",{children:["error ",f.message]}):(console.log(e[0]),t.jsxs(P,{children:[t.jsxs("div",{className:" d-flex justify-content-between align-items-center w-100 mb-1",children:[t.jsx("h4",{className:"d-flex justify-content-center align-items-center mb-0",children:"Patients queue"}),n.role==="cashier"&&t.jsx(b,{to:"/patientque/addtoque",className:"btn btn-primary",children:"Admit Patient"})]}),t.jsx("hr",{className:"bg-primary my-2"}),t.jsxs(C,{striped:!0,bordered:!0,responsive:!0,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"#"}),t.jsx("th",{children:"patient Name"}),t.jsx("th",{children:"phone"}),t.jsx("th",{children:"visit type"}),t.jsx("th",{children:"visit date"}),t.jsx("th",{children:"doctor"}),t.jsx("th",{children:"Action"})]})}),t.jsx("tbody",{children:e.length!==0?e==null?void 0:e.map((s,o)=>{var d,h,l,m,u,x,j;return t.jsxs("tr",{children:[t.jsx("td",{children:o+1}),t.jsxs("td",{children:[`${(d=s.patient)==null?void 0:d.firstName}`," ",(h=s.patient)==null?void 0:h.middleName]}),t.jsx("td",{children:(m=(l=s.patient)==null?void 0:l.address)==null?void 0:m.phone_1}),t.jsx("td",{children:(u=s.visitType)==null?void 0:u.name}),t.jsx("td",{children:k(s.assignment_date,"dd/MM/yyyy")}),t.jsxs("td",{children:[(x=s.doctor)==null?void 0:x.firstName," ",(j=s.doctor)==null?void 0:j.lastName]}),t.jsx("td",{children:s.status?"active":"inactive"}),n.role.name==="doctor"&&t.jsx(t.Fragment,{children:t.jsx("td",{children:t.jsx(v,{to:`/patients/history/${s.medicalRecord_id}`,children:t.jsx(A,{children:"view"})})})}),n.role.name==="cashier"&&t.jsx(t.Fragment,{children:t.jsxs("td",{children:[t.jsx("button",{children:"transfer"}),t.jsx("button",{children:"cancel"})]})})]},o)}):t.jsx("tr",{children:t.jsx("td",{colSpan:6,children:"no patient is Assigned"})})})]})]}))};export{G as default};
