import{l as p,Q as c,j as e}from"./index-adc5c439.js";import{u as j}from"./useMutation-46d3959e.js";import{A as f}from"./axiosInstance-8e812653.js";import{A as b}from"./useAxiosHeaders-0302b736.js";import{u as N}from"./index.esm-28bdf91a.js";import{c as g,a as i,o as q}from"./yup-e734d6e3.js";import{T as t}from"./TextInput-568ed4bc.js";import{N as v}from"./NumberInput-c7627adf.js";import{C as y,b as C}from"./InputGroupContext-86e132d6.js";import{F as r}from"./Form-fd32e757.js";import{R as d}from"./Row-191556ab.js";import{C as l}from"./Col-cdbc53ce.js";import{S}from"./index.esm-650f3687.js";import"./ElementChildren-abb33785.js";const A=()=>{const n=p(),o=b();return j({mutationFn:async s=>(console.log(s),f.post("/user/register",{userData:s},{...o})),onSuccess:async s=>{const{data:a}=s;console.log(a),c.success("user added"),n.invalidateQueries({queryKey:["users"],exact:!0})},onError:async s=>{const{data:a}=s.response;c.error(a.message),console.log(a.message)}})},E=g().shape({firstName:i().required("firstName is required"),middleName:i().required("middleName is required"),lastName:i(),email:i().email("invalid email").required("Email is required"),gender:i().required("Gender is required"),phone:i().required("phone is required"),role:i().required("role is required"),age:i().required("age is required")}),z=()=>{var m;const{mutate:n,isPending:o}=A(),{register:s,formState:{errors:a},handleSubmit:x}=N({defaultValues:{phone:"",role:"",email:"",age:"",gender:"",lastName:"",middleName:"",firstName:""},resolver:q(E)});console.log(a);const u=h=>{n(h)};return e.jsxs(y,{children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{children:"Add User"})}),e.jsx("hr",{}),e.jsxs(r,{onSubmit:x(u),children:[e.jsxs(d,{children:[e.jsx(l,{children:e.jsx(t,{errors:a.firstName,name:"firstName",register:s,label:"first name"})}),e.jsx(l,{children:e.jsx(t,{errors:a.middleName,name:"middleName",register:s,label:"middle name"})}),e.jsx(l,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"last name"}),e.jsx(r.Control,{...s("lastName"),name:"lastName",id:"lastName",type:"text",placeholder:"Enter..."})]})})]}),e.jsxs(d,{children:[e.jsx(l,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"sex"}),e.jsxs(r.Select,{...s("gender"),name:"gender","aria-label":"Default select example",children:[e.jsx("option",{children:"Select Sex"}),e.jsx("option",{value:"male",children:"male"}),e.jsx("option",{value:"female",children:"female"})]})]})}),e.jsx(l,{children:e.jsx(v,{errors:a.age,name:"age",register:s,label:"Age"})}),e.jsx(l,{children:e.jsx(t,{errors:a.phone,name:"phone",register:s,label:"phone"})})]}),e.jsxs(d,{children:[e.jsxs(l,{children:[e.jsxs(r.Group,{className:"mb-3",controlId:"formBasicEmail",children:[e.jsx(r.Label,{children:"Email"}),e.jsx(r.Control,{errors:a.email,name:"email",...s("email"),type:"email",placeholder:"example@gmail.com",isInvalid:a.email})]}),e.jsx(r.Control.Feedback,{type:"invalid",children:(m=a.email)==null?void 0:m.message})]}),e.jsx(l,{children:e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Role"}),e.jsxs(r.Select,{...s("role"),name:"role","aria-label":"Default select example",children:[e.jsx("option",{children:"Select role"}),e.jsx("option",{value:"doctor",children:"doctor"}),e.jsx("option",{value:"cashier",children:"cashier"}),e.jsx("option",{value:"laboratorian",children:"laboratorian"})]})]})}),e.jsx(l,{children:e.jsxs(r.Group,{className:"mb-3",controlId:"password",children:[e.jsx(r.Label,{children:"Password"}),e.jsx(r.Control,{disabled:!0,type:"password",placeholder:"123456"}),e.jsx(r.Text,{children:"default value for user 123456"})]})})]}),e.jsx("hr",{}),e.jsx("div",{className:"d-flex justifyContentEnd",children:e.jsx(l,{children:e.jsxs(C,{variant:"primary",disabled:o,className:"w-100",type:"submit",children:[o&&e.jsx(S,{animation:"border",size:"sm"}),"Register User"]})})})]})]})};export{z as default};
