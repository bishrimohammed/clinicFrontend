import{d as b,m as g,f as q,l as v,j as e,Q as p}from"./index-adc5c439.js";import{c as y,a as i,f as S,o as w}from"./yup-e734d6e3.js";import{C,b as P}from"./InputGroupContext-86e132d6.js";import{u as k}from"./index.esm-28bdf91a.js";import{T as o}from"./TextInput-568ed4bc.js";import{N as F}from"./NumberInput-c7627adf.js";import{u as U}from"./useMutation-46d3959e.js";import{A as I}from"./axiosInstance-8e812653.js";import{F as l}from"./Form-fd32e757.js";import{R as m}from"./Row-191556ab.js";import{C as s}from"./Col-cdbc53ce.js";import{S as $}from"./index.esm-650f3687.js";import"./ElementChildren-abb33785.js";const A=y().shape({firstName:i().required("first Name is required"),middleName:i().required("middle Name is required"),lastName:i().required(" lastName is required"),phone:i().required("phone Number is required"),gender:i().required("gender is required"),age:S().transform(d=>isNaN(d)?void 0:d).positive().integer().required("age is required"),woreda:i(),kebele:i()}),H=()=>{var x;const d=b(),{id:h}=g(),{state:n}=q();let c=n.name.split(" ");const{register:a,formState:{errors:r},handleSubmit:j}=k({defaultValues:{firstName:c[0],middleName:c[1],lastName:c[2],age:n.age,gender:n.gender,kebele:n.kebele,phone:n.phone,woreda:n.woreda},resolver:w(A)});v();const u=U({mutationFn:async t=>I.put(`/patient/${h}`,t).then(N=>N.data),onSuccess:async t=>{p.success("updated successfully"),d("/patients/patientlist")},onError:async t=>{p.error(t.response.data.message)}}),f=t=>{u.mutate(t)};return e.jsx(C,{className:"p-3 ",children:e.jsxs("div",{className:"p-3  bg-hrun-box hrunboxshadow",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h4",{children:"Update Patient Information"})}),e.jsx("hr",{}),e.jsxs(l,{onSubmit:j(f),children:[e.jsxs(m,{children:[e.jsx(s,{children:e.jsx(o,{label:"First Name",register:a,name:"firstName",errors:r.firstName})}),e.jsx(s,{children:e.jsx(o,{label:"Middle Name",register:a,name:"middleName",errors:r.middleName})}),e.jsx(s,{children:e.jsx(o,{label:"Last Name",register:a,name:"lastName",errors:r.lastName})})]}),e.jsxs(m,{children:[e.jsx(s,{children:e.jsxs(l.Group,{className:"mb-3",children:[e.jsx(l.Label,{children:"sex"}),e.jsxs(l.Select,{...a("gender"),isInvalid:r.gender,"aria-label":"Default select example",children:[e.jsx("option",{value:"",children:"Select Sex"}),e.jsx("option",{value:"male",children:"male"}),e.jsx("option",{value:"female",children:"female"})]}),e.jsx(l.Control.Feedback,{type:"inValid",children:(x=r.gender)==null?void 0:x.message})]})}),e.jsx(s,{children:e.jsx(F,{label:"Age",register:a,name:"age",errors:r.age})}),e.jsx(s,{children:e.jsx(o,{label:"Phone",register:a,name:"phone",errors:r.phone})})]}),e.jsxs(m,{children:[e.jsx(s,{children:e.jsx(o,{label:"Woreda",register:a,name:"woreda",errors:r.woreda})}),e.jsx(s,{children:e.jsx(o,{label:"Kebele",register:a,name:"kebele",errors:r.kebele})}),e.jsx(s,{})]}),e.jsxs(m,{children:[e.jsx(s,{}),e.jsx(s,{}),e.jsx(s,{})]}),e.jsx("hr",{}),e.jsx("div",{className:"d-flex justifyContentEnd",children:e.jsx(s,{children:e.jsxs(P,{variant:"primary",disabled:u.isPending,className:"w-100",type:"submit",children:[u.isPending&&e.jsx($,{animation:"border",size:"sm"}),"Update Patient"]})})})]})]})})};export{H as default};
