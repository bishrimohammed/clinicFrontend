import{Q as u,j as s}from"./index-adc5c439.js";import{b}from"./InputGroupContext-86e132d6.js";import{F as a}from"./Form-fd32e757.js";import{u as P}from"./index.esm-28bdf91a.js";import{c as x,a as i,o as f}from"./yup-e734d6e3.js";import{u as j}from"./useMutation-46d3959e.js";import{A as g}from"./axiosInstance-8e812653.js";import{A as y}from"./useAxiosHeaders-0302b736.js";import{S as N}from"./index.esm-650f3687.js";import"./ElementChildren-abb33785.js";import"./Col-cdbc53ce.js";const v=()=>{const d=y();return j({mutationFn:async r=>g.put("/user/changepassword",r,{...d}),onSuccess:async r=>{const{data:o}=r;u.success(o.message)},onError:async r=>{u.error(r.response.data.message)}})},C=x().shape({oldPassword:i().required("old Password is required"),newPassword:i().required("new Password is required").min(6,"Password must be at least 6 characters"),confirmPassword:i().required("Confirm  Password is required")}),V=()=>{var t,l,m;const{mutateAsync:d,isPending:r}=v(),{register:o,formState:{errors:e},handleSubmit:p,setValue:n}=P({defaultValues:{oldPassword:"",newPassword:"",confirmPassword:""},resolver:f(C)}),h=async c=>{console.log(c),d(c).then(w=>{console.log(w),w.status===200&&(n("oldPassword",""),n("newPassword",""),n("confirmPassword",""))})};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"p-2",children:s.jsxs("div",{className:" bg-hrun-box p-3 border border-1 hrunboxshadow borderRadius7px ",children:[s.jsx("div",{className:"bluewhite-bg p-2 mb-2",children:s.jsx("h5",{className:"ms-md-4 ms-1 mb-0",children:"Change your Password"})}),s.jsxs(a,{onSubmit:p(h),children:[s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Label,{children:"Old Password"}),s.jsx(a.Control,{type:"password",...o("oldPassword"),className:"border-color",isInvalid:e==null?void 0:e.confirmPassword,placeholder:"Enter..."}),s.jsx(a.Control.Feedback,{type:"invalid",children:(t=e==null?void 0:e.oldPassword)==null?void 0:t.message})]}),s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Label,{children:"New Password"}),s.jsx(a.Control,{type:"password",...o("newPassword"),className:"border-color",isInvalid:e==null?void 0:e.newPassword,placeholder:"Enter..."}),s.jsx(a.Control.Feedback,{type:"invalid",children:(l=e==null?void 0:e.newPassword)==null?void 0:l.message})]}),s.jsxs(a.Group,{className:"mb-3",children:[s.jsx(a.Label,{children:"Confirm New Password"}),s.jsx(a.Control,{type:"password",...o("confirmPassword"),className:"border-color",isInvalid:e==null?void 0:e.confirmPassword,placeholder:"Enter..."}),s.jsx(a.Control.Feedback,{type:"invalid",children:(m=e==null?void 0:e.confirmPassword)==null?void 0:m.message})]}),s.jsxs(b,{variant:"primary",disabled:r,type:"submit",children:[r&&s.jsx(N,{animation:"border",size:"sm"}),"Submit"]})]})]})})})};export{V as default};
