import{R as o,_ as h,m as j,r as m,j as r}from"./index-adc5c439.js";import{u}from"./useQuery-0c7d53ac.js";import{A as p}from"./axiosInstance-8e812653.js";import{A as f}from"./useAxiosHeaders-0302b736.js";import{S as y}from"./index.esm-650f3687.js";import{T as b}from"./Table-892073ec.js";import{b as g}from"./InputGroupContext-86e132d6.js";import{f as E}from"./formatDate-f5528b17.js";import{u as v}from"./useGetClinicInformation-c3f94354.js";import{T as P,a as x}from"./Tabs-162d704d.js";import"./moment-fbc5633a.js";import"./DefaultLayout-65fbaa93.js";import"./index.es-ffb0b0ea.js";import"./Nav-d46f6c14.js";import"./NoopTransition-52f737ac.js";import"./CardHeaderContext-3f12a520.js";import"./ElementChildren-abb33785.js";const _=s=>{let e=f();return u({queryKey:["MedicalHistory",s,"ExternalPrescription"],queryFn:async()=>p.get(`/patienthistory/${s}/getExternalPrescription`,{...e}).then(i=>i.data),staleTime:5*60*100,retry:1})},N=o.lazy(()=>h(()=>import("./PrintExternalPrescription-5f936095.js"),["assets/PrintExternalPrescription-5f936095.js","assets/index-adc5c439.js","assets/index-a7e6b55c.css","assets/PatientInfornPrint-13730abd.js","assets/useGetClinicInformation-c3f94354.js","assets/useQuery-0c7d53ac.js","assets/axiosInstance-8e812653.js","assets/DefaultLayout-65fbaa93.js","assets/index.esm-650f3687.js","assets/InputGroupContext-86e132d6.js","assets/index.es-ffb0b0ea.js","assets/DefaultLayout-7b215343.css","assets/useMedicalhistory-d492c1f3.js"])),q=()=>{var d;const{historyId:s}=j(),{data:e,isFetching:i,error:n}=_(s),a=m.useRef(null),l=()=>{a.current&&a.current.printData()};return i?r.jsx(y,{animation:"border",variant:"primary"}):n?r.jsxs("div",{children:["error : ",(d=n==null?void 0:n.response)==null?void 0:d.data.message]}):r.jsx(r.Fragment,{children:(e==null?void 0:e.ExternalPrescription.length)!==0?r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"ps-2  pb-1",children:" External medication"}),r.jsxs(b,{striped:!0,bordered:!0,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"#"}),r.jsx("th",{children:"Drug name"}),r.jsx("th",{children:"Dosage"}),r.jsx("th",{children:"frequency"}),r.jsx("th",{children:"route"}),r.jsx("th",{children:"No of Days"}),r.jsx("th",{children:"quantity"}),r.jsx("th",{children:"remark"})]})}),r.jsx("tbody",{children:e==null?void 0:e.ExternalPrescription.map((t,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:c+1}),r.jsx("td",{children:t.drugname}),r.jsx("td",{children:t.dosage}),r.jsx("td",{children:t.frequency}),r.jsx("td",{children:t.route}),r.jsx("td",{children:t.number_of_days}),r.jsx("td",{children:t.qty}),r.jsx("td",{children:t.remark})]},c))})]}),r.jsx("div",{className:"d-none",children:r.jsx(N,{medications:e==null?void 0:e.ExternalPrescription,ref:a})}),r.jsx("div",{className:"d-flex justify-content-end",children:r.jsx(g,{onClick:l,className:"px-4 ms-auto mb-3",children:r.jsx("span",{children:"print"})})})]}):r.jsx("div",{className:"p-2 text-center bg-success bg-opacity-25 text-dark",children:"There is no External Prescription for this history"})})},D=s=>{let e=f();return u({queryKey:["MedicalHistory",s,"InternalPrescription"],queryFn:async()=>p.get(`/prescriptions/${s}`,{...e}).then(i=>i.data),staleTime:20*60*1e3})},I=o.lazy(()=>h(()=>import("./PrintMedication-904c05e7.js"),["assets/PrintMedication-904c05e7.js","assets/index-adc5c439.js","assets/index-a7e6b55c.css","assets/PatientInfornPrint-13730abd.js","assets/useGetClinicInformation-c3f94354.js","assets/useQuery-0c7d53ac.js","assets/axiosInstance-8e812653.js","assets/DefaultLayout-65fbaa93.js","assets/index.esm-650f3687.js","assets/InputGroupContext-86e132d6.js","assets/index.es-ffb0b0ea.js","assets/DefaultLayout-7b215343.css","assets/useMedicalhistory-d492c1f3.js"])),T=()=>{var d;const{historyId:s}=j(),{data:e,isFetching:i,error:n}=D(s),a=m.useRef(null),l=()=>{a.current&&a.current.printData()};return i?r.jsx(y,{animation:"border",variant:"primary"}):n?r.jsxs("div",{children:["error : ",(d=n==null?void 0:n.response)==null?void 0:d.data.message]}):r.jsx("div",{className:" p-2",children:e?r.jsxs(r.Fragment,{children:[" ",r.jsx("h4",{className:"ps-2  pb-1",children:" Internal"}),r.jsxs(b,{striped:!0,bordered:!0,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"#"}),r.jsx("th",{children:"Drug name"}),r.jsx("th",{children:"Dosage"}),r.jsx("th",{children:"frequency"}),r.jsx("th",{children:"route"}),r.jsx("th",{children:"start Date"}),r.jsx("th",{children:"No of Days"}),r.jsx("th",{children:"quantity"}),r.jsx("th",{children:"remark"})]})}),r.jsx("tbody",{children:e==null?void 0:e.medications.map((t,c)=>r.jsxs("tr",{children:[r.jsx("td",{children:c+1}),r.jsx("td",{children:t.medicineId.drugname}),r.jsx("td",{children:t.dosage}),r.jsx("td",{children:t.frequency}),r.jsx("td",{children:t.route}),r.jsx("td",{children:E(Date.now())}),r.jsx("td",{children:t.number_of_days}),r.jsx("td",{children:t.qty}),r.jsx("td",{children:t.remark})]},c))})]}),r.jsx("div",{className:"d-none",children:r.jsx(I,{medications:e,ref:a})}),r.jsx("div",{className:"d-flex justify-content-end",children:r.jsx(g,{onClick:l,className:"px-4 ms-auto mb-3",children:r.jsx("span",{children:"print"})})})]}):r.jsx("div",{className:"p-2 bg-danger  bg-opacity-10 text-center",children:"Not prescribed"})})},F=()=>(v(),r.jsx("div",{className:" p-2",children:r.jsxs(P,{id:"controlled-tab-example1",className:"border-bottom border-bottom-1 border-2",defaultActiveKey:"Internal",variant:"underline",children:[r.jsxs(x,{eventKey:"Internal",title:"Internal",children:[r.jsx("hr",{}),r.jsx(T,{})]}),r.jsxs(x,{eventKey:"External",title:"External",children:[r.jsx("hr",{}),r.jsx(q,{})]})]},"pres")})),J=o.memo(F);export{J as default};
